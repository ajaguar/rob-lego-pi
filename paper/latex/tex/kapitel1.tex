\chapter{Einleitung}

\section{Motivation}
Um im Unterricht Schülern und Studenten dass Programmieren und Konstruieren von Robotern zu erläutern, ist Lego Mindstorms mit dem programmierbaren Baustein NXT eine gute Wahl. Das Ziel dieser Arbeit ist es das programmieren von Lego Mindstorms Robotern zu vereinfachen und gleichzeitig die Grenzen die duch den Baustein NXT gesetzt sind zu sprengen. Wir wollen die Möglichkeiten der Programmierung des NXT eins zu eins mit dem Minicomputer Raspberry PI abbilden. Damit ist es uns möglich eine einfachere Programmierschnittstelle anzubieten und zusätzlich die vielen Möglichkeiten des Raspberry PIs für Schüler zugänglich machen. 

In der Folgenden Arbeit werden wir den, vom Raspberry PI gesteuerten, Lego Mindstorms Roboter LegoPI nennen.

Wir sehen den Raspberry PI als ein dem NXT überlegenes Steuerungsmodul, da auf dem Raspberry ein vollständiges Ubuntu Linux Betriebssystem läuft. Eine Überlegung der Autoren hierbei war es auf dem Ubuntu einen Webserver laufen zu lassen und dem Roboter über diesen aus der Ferne zu steuern.
Weiterhin soll es in dieser Arbeit ermöglicht werden, weitere Sensoren an den Raspberry PI anschließen zu können. Zwar gibt es für Lego Mindstorms eine Liste von Sensoren, wie z.B einen Lichtsensor, Tastsensor und Ultraschallsensor, dieses Set an Sensoren ist allerdings eingeschränkt.

Das Bereitstellen eines programmierbaren Roboters für jeden Schüler kann schnell teuer werden. Wir sehen die Verwendung eines Raspberry PI auch deshalb als Vorteil, weil ein Raspberry B+ mit 39,90 Eur den NXT mit 9841 mit 148,99 Eur preislich schlägt. \footnote{Preisvergleich des Raspberry PI 2 B+ und NXT 9841 auf www.amazon.de}

In dieser Arbeit werden wir uns darauf beschränken alle Sensoren des NXT Bausatzes mit dem Raspberry PI zu verbinden. Zusätzlich soll es möglich sein Motoren über den Raspberry zu steuern. Um zu Prüfen ob der Raspberry PI den NXT im Unterricht ersetzen kann, werden wir einen Parqour der auch von Schülern der Hochschule Mannheim absolviert werden muss mit dem LegoPI durchlaufen.

\chapter{Grundlagen}
\section{Raspberry PI}
\label{Grundlagen:RaspberryPI}
%\index{Auszeichnungen!im Text}

Raspberry PI ist ein günstiger Computer in Kreditkartengröße, welches viele Schnittstellen bietet, wie z.B HDMI, USB, Audio, GPIOs und Ethernet.
Was den Raspberry PI so beliebt macht um eigene Systeme zu bauen, ist dass auf ihm ein vollständiges Linux Betriebssystem läuft. Dies führt dazu, dass nahezu alles was auf einem Desktoprechner läuft auch auf einem Raspberry PI ausführbar ist.

\begin{figure}[h]
  \centering
  \includegraphics[width=15cm]{raspberrypi}
  \caption{Ein RaspberryPI 2 mit Beschrifteten Schnittstellen. Quelle: http://www.portunity.de/blog/2013/februar/raspberry-pi-warum-ist-der-mini-computer-bei-unseren-mitarbeitern-so-beliebt.html}
  \label{Kap1:RaspberryPI}
\end{figure}

\section{NXT}
\label{Grundlagen:NXT}
%\index{Auszeichnungen!im Text}

Lego Mindstorms NXT ist ein Steuerungscomputer der Produktserie Lego Mindstorms. Es hat ebenso wie der Raspberry PI Anschlüsse für USB- und Bluetooth Schnittstellen. Im Gegensatz zu Raspberry PI bietet der NXT schon von vornerein Anschlüsse für Sensoren und Aktoren. 

\begin{figure}[h]
  \centering
  \includegraphics[width=12cm]{nxt}
  \caption{Ein NXT Baustein mit Anschlüssen für Motoren und Sensoren. Quelle: https://de.wikipedia.org/wiki/Lego-Mindstorms-NXT}
  \label{Kap1:NXT}
\end{figure}



\section{A/D-Wandler}

Ein Analog-Digital-Umsetzer, kurz A/D-Wandler, ist ein elektronisches Baustein, bei dem ein zeit-kontinierliches Eingangssignal in einzelne diskrete Abtastwerte abgetastet werden.

In folgender Abbildung ist ein MCP3008 abgebildet. In dieser Arbeit wird dieser Baustein dazu verwendet, analoge Signale von Lego Sensoren in digitale Daten abzutasten, um diese im Raspberry PI zu verarbeiten. Der MCP3008 bietet 8 Eingänge um Sensoren Anzuschließen.

\begin{figure}[h]
  \centering
  \includegraphics[width=12cm]{mcp3008}
  \caption{MCP3008 A/D-Wandler mit 8 Eingängen für Sensoren CH0-CH7}
  \label{Kap1:NXT}
\end{figure}


\section{Bussysteme}
In der Computerarchitekture ist ein Bus ein System, das Daten zwischen einzelnen Computerbestandteile überträgt.

\subsection{SPI}

Der Serial Peripheral Interface (SPI) Bus ist eine von Motorola entwickelte,  synchrone serielle Kommunikationsschnittstelle, welche für die Übertragung von Daten über kurze Distanzen entworfen ist.  Häufige Anwendung findet der SPI in Embedded Systems. 

Eine Kommunikation über SPI erfolgt über einen SPI Master und einen SPI Slave. Der SPI Master startet eine Kommunikation in dem er die SS Verbindung auf 0 Volt zieht und eine clock signal mit einer bestimmten clock frequency aktiviert. Die zu sendenden Signale werden dann über den MOSI (Master Out Slave In) übertragen, in der Frequenz die von SCLK vorgeben ist. Der SPI ist ein single-master Protokoll, da lediglich ein Master die Kommunikation über alle Slaves steuert.

\begin{figure}[h]
  \centering
  \includegraphics[width=12cm]{spi.png}
  \caption{SPI Kommunikation erfolgt über einen Puls der von SCLK gegeben ist und den Master und Slave synchronisiert. Über MOSI (Master IN Slave OUT) sendet der Master Signale an den Slave. Quelle: http://www.byteparadigm.com/applications/introduction-to-i2c-and-spi-protocols}
  \label{Kap1:SPI}
\end{figure}


\subsection{I2C}

I2C ist ein multi-master Protokoll mit zwei Datenleitungen. Über Serial Data (SDA) werden die Daten übertragen. Der SCL (Serial Clock) gibt die Frequenz der Datenübertragung an und synchronisiert somit die Kommunikationspartner. Jedes Gerät, welches an den Bus angeschlossen ist bekommt eine 7 -bit slave address. Es können beliebig viele Geräte an den I2C angeschlossen werden. Die Daten werden in 8-bit Paketen übertragen. Die Daten Raten können 100 kbps, 400 kbps oder 3.4 Mbps betragen. Diese verschiedenen Übertragungsraten werden auch standard mode, fast mode und high speed mode genannt.

Physikalisch besteht der I2C Bus aus zwei Leitungen und einer Ground Leitung (FIXME:siehe Abbildung x). Die aktiven Leitungen sind bi-direktional. Im I2C Standard ist definiert, dass jedes I2C Gerät welches Daten übersenden will, die Rolle eines Masters annimmt und alle anderen Geräte in diesem Moment Slaves sind.

\begin{figure}[h]
  \centering
  \includegraphics[width=12cm]{i2c}
  \caption{Zwei I2C Geräte sind über SDA und SCL verbunden. Diese beiden Leitungen sind über pull-up Widerständen mit VCC verbunden. Quelle: http://www.byteparadigm.com/applications/introduction-to-i2c-and-spi-protocols/}
  \label{Kap1:I2C}
\end{figure}

\section{PWM}

\chapter{Implementierung}

\chapter{Fazit}

In dieser Arbeit haben wir es geschafft LegoPI zu bauen. Einen Roboter der mit allen analogen Sensoren des Lego Mindstorms Bausatzes kompatibel ist. LegoPI ist ebenso in der Lage zwei Motoren zu steuern, um die Fortbewegung des Roboters zu ermöglichen.



\subsection{Anführungszeichen}

Deutsche Anführungszeichen gehen so: "`dieser Text steht in \glq Anführungszeichen\grq; alles klar?"'.


\subsection{Abkürzungen}
\index{Abkürzungen}
\index{Abbreviation|see{Abkürzungen}}

Eine \ac{ABK} wird bei der ersten Verwendung ausgeschrieben\footnote{Ausschreiben bedeutet, dass man nicht die Abkürzung sondern die lange Form verwendet.}. Danach nicht mehr: \ac{ABK}. Man kann allerdings die Langform\footnote{\blindtext} explizit anfordern: \acl{ABK} oder die Kurzform \acs{ABK} oder auch noch einmal die Definition: \acf{ABK}.

Mehr dazu findet sich im Kapitel~\ref{Einleitung:Textauszeichnungen} auf Seite~\pageref{Einleitung:Textauszeichnungen}.


\subsubsection{Noch ein Unterabschnitt}

\paragraph{Eine Absatzüberschrift}
\blindtext[1]


\subsection{Literaturarbeit}

Wichtig ist das korrekte Zitieren von Quellen, wie es auch von \cite{Kornmeier2011} dargelegt wird. Interessant ist in diesem Zusammenhang auch der Artikel von \cite{Vixie2007}. Häufig werden die Zitate auch in Klammern gesetzt, wie bei \citep{Kornmeier2011}.

\blindtext[4]